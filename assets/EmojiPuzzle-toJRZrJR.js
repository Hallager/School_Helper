import{_ as J,r as u,o as Q,n as W,p as Z,q as ee,u as te,m as oe,b as l,e as n,F as w,f as C,d as R,t as m,h as j,l as b,a as ne,s as ae,j as i,k as se}from"./index-BxUdpvOu.js";const le={key:0,class:"start-screen"},ie={class:"theme-grid"},re=["onClick"],ue={class:"theme-icon"},ce={class:"theme-name"},de={key:1,class:"game-area"},ve={class:"header"},me={class:"score"},fe={class:"target-zone"},pe={class:"number-display"},ge={class:"dock-zone"},be=["onMousedown","onTouchstart"],he={key:1,class:"confetti-container"},ye={key:2,class:"win-overlay"},_e={class:"win-actions"},ke={__name:"EmojiPuzzle",setup(we){const O=[{id:"farm",name:"BondegÃ¥rd",icon:"ðŸ·",emojis:["ðŸ®","ðŸ·","ðŸ”","ðŸ‘","ðŸšœ","ðŸ´"],bgColor:"#e2f0cb",primaryColor:"#76c893"},{id:"vehicles",name:"KÃ¸retÃ¸jer",icon:"ðŸš—",emojis:["ðŸš—","ðŸš“","ðŸš‘","ðŸš’","ðŸšœ","ðŸšŒ"],bgColor:"#dff9fb",primaryColor:"#22a6b3"},{id:"fruit",name:"Frugt & GrÃ¸nt",icon:"ðŸŽ",emojis:["ðŸŽ","ðŸŒ","ðŸ‡","ðŸ“","ðŸ¥•","ðŸ¥¦"],bgColor:"#ffeaa7",primaryColor:"#fd79a8"},{id:"ocean",name:"Havet",icon:"ðŸ™",emojis:["ðŸŸ","ðŸ¦€","ðŸ™","ðŸ¬","ðŸ³","ðŸ¢"],bgColor:"#c7ecee",primaryColor:"#7ed6df"},{id:"fantasy",name:"Eventyr",icon:"ðŸ¦„",emojis:["ðŸ¦„","ðŸ‰","ðŸ‘¸","ðŸ‘‘","ðŸ§š","ðŸ°"],bgColor:"#e056fd",primaryColor:"#be2edd"},{id:"forest",name:"Skoven",icon:"ðŸ»",emojis:["ðŸ¦Š","ðŸ»","ðŸ¦‰","ðŸ„","ðŸŒ²","ðŸ¿ï¸"],bgColor:"#badc58",primaryColor:"#6ab04c"},{id:"space",name:"Rummet",icon:"ðŸš€",emojis:["ðŸš€","ðŸ‘½","ðŸª","â­","ðŸ‘¨ðŸš€","ðŸ›¸"],bgColor:"#30336b",primaryColor:"#f9ca24"},{id:"party",name:"Slik & Fest",icon:"ðŸ¦",emojis:["ðŸ¦","ðŸŽ‚","ðŸŽˆ","ðŸŽ","ðŸ­","ðŸ©"],bgColor:"#ffbe76",primaryColor:"#ff7979"}],M=u("start"),c=u(null),f=u(5),$=u([]),h=u(0),L=u(null),y=u(""),p=u(!1),T=u(!1),v=u(null),x=u(!1),r=u({active:!1,item:null,startX:0,startY:0,x:0,y:0}),{initAudio:P,sfx:X}=te();let z=null,E=null;const q=["id_9_prÃ¸v_igen","id_10_hov,_det_var_ikke_den","id_11_kom_igen","id_12_nÃ¦sten","id_13_prÃ¸v_en_gang_til"],G=["id_1_flot","id_2_rigtigt","id_3_sÃ¥dan","id_4_godt_klaret","id_5_jubii","id_6_super","id_7_hvor_er_du_god","id_8_fantastisk"];Q(()=>{z=new Audio(W),E=new Audio(Z)}),ee(()=>{window.removeEventListener("mousemove",_),window.removeEventListener("touchmove",_),window.removeEventListener("mouseup",k),window.removeEventListener("touchend",k)});const N=o=>{P(),X.select(),c.value=o,M.value="playing",h.value=0,x.value=!1,Y()},V=()=>{X.select(),h.value=0,x.value=!1,Y()},Y=()=>{p.value=!1,v.value=null,y.value="",T.value=!1,f.value=Math.floor(Math.random()*10)+1;const o={id:"correct",count:f.value,emoji:A(c.value)};let t=B(f.value,1,10);const e={id:"wrong1",count:t,emoji:A(c.value,[o.emoji])},s={id:"wrong2",count:B(f.value,1,10,[t]),emoji:A(c.value,[o.emoji,e.emoji])};$.value=[o,e,s].sort(()=>Math.random()-.5)},B=(o,t,e,a=[])=>{let s;do s=Math.floor(Math.random()*(e-t+1))+t;while(s===o||a.includes(s));return s},A=(o,t=[])=>{const e=o.emojis.filter(a=>!t.includes(a));return e.length===0?o.emojis[0]:e[Math.floor(Math.random()*e.length)]},U=o=>{const t=ne.find(e=>e.tal===o);t&&z&&(z.currentTime=t.start,z.play().catch(e=>{}),setTimeout(()=>z.pause(),(t.slut-t.start)*1e3))},F=o=>{if(!E)return;let t=o==="positive"?G:q,e=t[Math.floor(Math.random()*t.length)];const a=ae.find(s=>s.id===e);a&&(E.currentTime=a.start,E.play().catch(s=>{}),setTimeout(()=>E.pause(),(a.slut-a.start)*1e3+200))},I=(o,t)=>{if(p.value)return;const e=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY;L.value=t.id,r.value={active:!0,item:t,startX:e,startY:a,x:e,y:a},window.addEventListener("mousemove",_),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("mouseup",k),window.addEventListener("touchend",k)},_=o=>{if(!r.value.active)return;o.cancelable&&o.preventDefault();const t=o.touches?o.touches[0].clientX:o.clientX,e=o.touches?o.touches[0].clientY:o.clientY;r.value.x=t,r.value.y=e},k=o=>{if(!r.value.active)return;const t=r.value.item,e=r.value.x,a=r.value.y,s=document.querySelector(".target-zone");let S=!1;if(s){const d=s.getBoundingClientRect();e>d.left-50&&e<d.right+50&&a>d.top-50&&a<d.bottom+50&&(H(t),S=!0)}if(!S){const d=document.querySelector(".reader-slot");if(d){const g=d.getBoundingClientRect();e>g.left&&e<g.right&&a>g.top&&a<g.bottom&&(U(t.count),S=!0)}}if(!S){const d=document.querySelector(".dock-zone");let g=!1;if(d){const D=d.getBoundingClientRect();e>D.left&&e<D.right&&a>D.top&&a<D.bottom&&(g=!0)}g||F("negative")}L.value=null,r.value.active=!1,window.removeEventListener("mousemove",_),window.removeEventListener("touchmove",_),window.removeEventListener("mouseup",k),window.removeEventListener("touchend",k)},H=o=>{o.count===f.value?(p.value=!0,v.value=o,h.value++,X.win(),setTimeout(()=>{F("positive")},1e3),y.value="Fantastisk!",T.value=!0,h.value>=10?setTimeout(()=>{x.value=!0,T.value=!0;const{saveGameResult:t}=oe();t("Emoji Puslespil",h.value,{theme:c.value.name})},1500):setTimeout(()=>{Y()},3e3)):(F("negative"),y.value="PrÃ¸v igen!",setTimeout(()=>y.value="",1e3))},K=()=>{const o=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"];return{left:Math.random()*100+"%",top:"-20px",backgroundColor:o[Math.floor(Math.random()*o.length)],animation:`fall ${Math.random()*2+1}s linear infinite`,animationDelay:Math.random()+"s"}};return(o,t)=>(i(),l("div",{class:"game-container",style:b({backgroundColor:c.value?c.value.bgColor:"#f0faff"})},[M.value==="start"?(i(),l("div",le,[t[3]||(t[3]=n("h1",{class:"title"},"ðŸ§© Emoji Puslespil",-1)),t[4]||(t[4]=n("p",{class:"subtitle"},"VÃ¦lg et tema",-1)),n("div",ie,[(i(),l(w,null,C(O,e=>n("button",{key:e.id,class:"theme-card",style:b({"--theme-color":e.primaryColor}),onClick:a=>N(e)},[n("span",ue,m(e.icon),1),n("span",ce,m(e.name),1)],12,re)),64))]),n("button",{class:"back-btn",onClick:t[0]||(t[0]=e=>o.$router.push("/"))},"Tilbage")])):(i(),l("div",de,[n("div",ve,[n("button",{class:"icon-btn",onClick:t[1]||(t[1]=e=>M.value="start")},"âŒ"),n("div",me,"â­ "+m(h.value)+" / 10",1)]),n("div",fe,[n("div",{class:j(["puzzle-container",{snapped:p.value}])},[n("div",{class:"puzzle-piece target",style:b({"--piece-color":c.value.primaryColor})},[n("div",pe,m(f.value),1),t[5]||(t[5]=n("div",{class:"puzzle-knob-hole"},null,-1))],4),p.value&&v.value?(i(),l("div",{key:0,class:"puzzle-piece option attached-bottom",style:b({"--piece-color":"white","--border-color":c.value.primaryColor})},[n("div",{class:j(["emoji-grid","count-"+v.value.count])},[(i(!0),l(w,null,C(v.value.count,e=>(i(),l("span",{key:e},m(v.value.emoji),1))),128))],2),t[6]||(t[6]=n("div",{class:"puzzle-knob-stick"},null,-1))],4)):R("",!0)],2)]),n("div",{class:j(["feedback-text",{visible:y.value}])},m(y.value),3),n("div",ge,[t[8]||(t[8]=n("div",{class:"reader-slot"},[n("div",{class:"reader-icon"},"ðŸ‘‚"),n("div",{class:"reader-label"},"Lyt")],-1)),(i(!0),l(w,null,C($.value,(e,a)=>(i(),l("div",{key:e.id,class:j(["puzzle-piece option",{dragging:L.value===e.id,"correct-anim":p.value&&e.count===f.value}]),style:b({"--piece-color":"white","--border-color":c.value.primaryColor,visibility:L.value===e.id||p.value&&v.value&&v.value.id===e.id?"hidden":"visible"}),onMousedown:s=>I(s,e),onTouchstart:se(s=>I(s,e),["prevent"])},[n("div",{class:j(["emoji-grid","count-"+e.count])},[(i(!0),l(w,null,C(e.count,s=>(i(),l("span",{key:s},m(e.emoji),1))),128))],2),t[7]||(t[7]=n("div",{class:"puzzle-knob-stick"},null,-1))],46,be))),128))]),r.value.active?(i(),l("div",{key:0,class:"puzzle-piece dragon",style:b({"--piece-color":"white","--border-color":c.value.primaryColor,transform:`translate(${r.value.x}px, ${r.value.y}px)`})},[n("div",{class:j(["emoji-grid","count-"+r.value.item.count])},[(i(!0),l(w,null,C(r.value.item.count,e=>(i(),l("span",{key:e},m(r.value.item.emoji),1))),128))],2),t[9]||(t[9]=n("div",{class:"puzzle-knob-stick"},null,-1))],4)):R("",!0),T.value?(i(),l("div",he,[(i(),l(w,null,C(50,e=>n("div",{key:e,class:"confetti",style:b(K())},null,4)),64))])):R("",!0),x.value?(i(),l("div",ye,[t[10]||(t[10]=n("h1",null,"ðŸŽ‰ Du vandt! ðŸŽ‰",-1)),t[11]||(t[11]=n("p",null,"Du fik alle 10 rigtige!",-1)),n("div",_e,[n("button",{class:"btn-main",onClick:V},"Spil igen ðŸ”„"),n("button",{class:"btn-main btn-secondary",onClick:t[2]||(t[2]=e=>M.value="start")},"VÃ¦lg nyt tema ðŸŽ¨")])])):R("",!0)]))],4))}},je=J(ke,[["__scopeId","data-v-b5e462c1"]]);export{je as default};
