import{_ as U,r as i,o as j,n as z,c as x,a as M,b as n,d as u,e as l,F as _,f as b,t as A,g as C,h as V,i as H,w as J,T as K,j as s,k as X,l as S,u as O,m as Q}from"./index-BxUdpvOu.js";const Y=""+new URL("dropping-bag-DJl3dpib.mp3",import.meta.url).href,Z=""+new URL("train-whistle-CKX2HtE4.mp3",import.meta.url).href,ee={class:"game-container"},te={key:0,class:"start-screen"},ae={class:"level-grid"},le=["onClick"],ne={class:"level-name"},se={key:1,class:"play-area"},oe={class:"header-bar"},re={class:"level-info"},ie={class:"wagons"},ue=["onDrop","onClick"],de={key:0,class:"luggage-in-wagon"},ce={key:1,class:"empty-slot-number"},me={key:0,class:"instruction"},ve={key:0},fe={key:1,class:"platform"},ge=["onDragstart","onMousedown"],pe={key:2,class:"win-overlay"},he={key:2,class:"confetti-container"},ye={__name:"TalRaekkefoelge",setup(ke){const{initAudio:$,sfx:c}=O(),m=i("start"),d=i(null),v=i([]),h=i([]),f=i(!1),T=i(!1),w=i(!1);let g=null,p=null,y=null;const D=[{id:"id_0_drop0",tekst:"drop0",start:.473,slut:.769},{id:"id_1_drop1",tekst:"drop1",start:1.553,slut:1.801}],B=[{id:1,name:"1 - 10",sequence:Array.from({length:10},(t,e)=>e+1)},{id:2,name:"1 - 20",sequence:Array.from({length:20},(t,e)=>e+1)},{id:3,name:"10-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*10)},{id:4,name:"2-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*2)},{id:5,name:"3-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*3)},{id:6,name:"4-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*4)},{id:7,name:"5-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*5)},{id:8,name:"6-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*6)},{id:9,name:"7-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*7)},{id:10,name:"8-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*8)},{id:11,name:"9-tabellen",sequence:Array.from({length:10},(t,e)=>(e+1)*9)}],k=["#FF6B6B","#4ECDC4","#FFE66D","#FF9F43","#54A0FF","#5F27CD","#FF9FF3"];j(()=>{g=new Audio(z),p=new Audio(Y),y=new Audio(Z)});const q=x(()=>d.value?d.value.sequence.every(t=>M.some(e=>e.tal===t)):!1),I=t=>{if(!q.value){c.select();return}const e=M.find(o=>o.tal===t);e&&g?(g.currentTime=e.start,g.play().catch(o=>console.error(o)),setTimeout(()=>g.pause(),(e.slut-e.start)*1e3)):c.select()},L=()=>{if(!p)return;const t=D[Math.floor(Math.random()*D.length)];p.currentTime=t.start,p.play().catch(e=>console.error(e)),setTimeout(()=>p.pause(),(t.slut-t.start)*1e3)},E=t=>{$(),c.click(),d.value=t,f.value=!1,T.value=!1,w.value=!1,v.value=t.sequence.map(e=>({targetValue:e,filled:!1,value:null})),h.value=t.sequence.map((e,o)=>({id:o,value:e,color:k[o%k.length]})).sort(()=>Math.random()-.5),m.value="playing"},N=(t,e)=>{t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("itemId",e.id),t.dataTransfer.setData("itemValue",e.value)},R=(t,e)=>{const o=parseInt(t.dataTransfer.getData("itemValue")),a=parseInt(t.dataTransfer.getData("itemId"));P(o,a,e)};i(null);const P=(t,e,o)=>{const a=v.value[o];a.filled||(t===a.targetValue?(L(),a.filled=!0,a.value=t,h.value=h.value.filter(r=>r.id!==e),W()):c.wrong())},W=()=>{v.value.every(t=>t.filled)&&(f.value=!0,c.win(),y&&(y.currentTime=0,y.play().catch(t=>console.error("Whistle play error:",t))),setTimeout(()=>{w.value=!0,T.value=!0;const{saveGameResult:t}=Q();t("Tal Toget",v.value.length,{level:d.value.name,sequenceLength:d.value.sequence.length})},1500))},G=()=>({left:Math.random()*100+"%",top:"-10%",backgroundColor:k[Math.floor(Math.random()*k.length)],animation:`fall ${2+Math.random()*3}s linear infinite`});return(t,e)=>{var o;return s(),n("div",ee,[m.value==="start"?(s(),n("div",te,[e[5]||(e[5]=l("h1",{class:"title"},"ðŸš‚ Tal Toget",-1)),e[6]||(e[6]=l("p",{class:"subtitle"},"VÃ¦lg en bane og hjÃ¦lp toget med at kÃ¸re!",-1)),l("div",ae,[(s(),n(_,null,b(B,a=>l("button",{key:a.id,class:"level-card",onClick:r=>E(a)},[e[4]||(e[4]=l("span",{class:"level-icon"},"ðŸŽ«",-1)),l("span",ne,A(a.name),1)],8,le)),64))]),l("button",{class:"back-btn",onClick:e[0]||(e[0]=a=>t.$router.push("/"))},"â¬… Tilbage")])):u("",!0),m.value==="playing"?(s(),n("div",se,[l("div",oe,[l("button",{class:"btn-small",onClick:e[1]||(e[1]=a=>m.value="start")},"âŒ Stop"),l("div",re,"Bane: "+A((o=d.value)==null?void 0:o.name),1)]),l("div",{class:V(["train-container",{"train-departing":f.value}])},[e[7]||(e[7]=l("div",{class:"locomotive"},[l("div",{class:"chimney"},"â˜ï¸"),C(" ðŸš‚ ")],-1)),l("div",ie,[(s(!0),n(_,null,b(v.value,(a,r)=>(s(),n("div",{key:r,class:V(["wagon",{filled:a.filled}]),onDragover:e[2]||(e[2]=X(()=>{},["prevent"])),onDrop:F=>R(F,r),onClick:F=>t.handleSlotClick(r)},[a.filled?(s(),n("div",de,A(a.value),1)):(s(),n("div",ce))],42,ue))),128))])],2),f.value?u("",!0):(s(),n("p",me,[e[8]||(e[8]=C(" TrÃ¦k kufferterne op pÃ¥ de rigtige vogne! ",-1)),q.value?(s(),n("span",ve,"Tryk for at hÃ¸re tallet.")):u("",!0)])),f.value?u("",!0):(s(),n("div",fe,[H(K,{name:"pop",tag:"div",class:"luggage-pile"},{default:J(()=>[(s(!0),n(_,null,b(h.value,a=>(s(),n("div",{key:a.id,class:"luggage-item",draggable:"true",onDragstart:r=>N(r,a),onMousedown:r=>I(a.value),style:S({backgroundColor:a.color})},[C(A(a.value)+" ",1),e[9]||(e[9]=l("div",{class:"handle"},null,-1))],44,ge))),128))]),_:1})])),T.value?(s(),n("div",pe,[e[10]||(e[10]=l("h1",null,"ðŸŽ‰ Godt gÃ¥et! ðŸŽ‰",-1)),e[11]||(e[11]=l("p",null,"Toget kÃ¸rer afsted!",-1)),l("button",{class:"btn-main",onClick:e[3]||(e[3]=a=>m.value="start")},"VÃ¦lg ny bane")])):u("",!0)])):u("",!0),w.value?(s(),n("div",he,[(s(),n(_,null,b(30,a=>l("div",{key:a,class:"confetti",style:S(G())},null,4)),64))])):u("",!0)])}}},be=U(ye,[["__scopeId","data-v-9f0e1f8f"]]);export{be as default};
